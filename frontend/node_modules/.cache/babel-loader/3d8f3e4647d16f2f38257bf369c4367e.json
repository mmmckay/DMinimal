{"remainingRequest":"/Users/daren.mcculley/go/src/github.com/rtfreedman/SpellTracker/frontend/node_modules/babel-loader/lib/index.js!/Users/daren.mcculley/go/src/github.com/rtfreedman/SpellTracker/frontend/node_modules/eslint-loader/index.js??ref--13-0!/Users/daren.mcculley/go/src/github.com/rtfreedman/SpellTracker/frontend/src/store.js","dependencies":[{"path":"/Users/daren.mcculley/go/src/github.com/rtfreedman/SpellTracker/frontend/src/store.js","mtime":1539832076395},{"path":"/Users/daren.mcculley/go/src/github.com/rtfreedman/SpellTracker/frontend/node_modules/cache-loader/dist/cjs.js","mtime":1539818865210},{"path":"/Users/daren.mcculley/go/src/github.com/rtfreedman/SpellTracker/frontend/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/daren.mcculley/go/src/github.com/rtfreedman/SpellTracker/frontend/node_modules/eslint-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import Vue from 'vue';\nimport Vuex from 'vuex';\nVue.use(Vuex);\nvar defaultClass = {\n  classname: '',\n  level: 0,\n  slots: {\n    1: 0,\n    2: 0,\n    3: 0,\n    4: 0,\n    5: 0,\n    6: 0,\n    7: 0,\n    8: 0,\n    9: 0\n  },\n  workingSlots: {\n    1: 0,\n    2: 0,\n    3: 0,\n    4: 0,\n    5: 0,\n    6: 0,\n    7: 0,\n    8: 0,\n    9: 0\n  }\n};\nvar defaultCharacter = {\n  deathThrows: 0,\n  lifeThrows: 0,\n  initiative: null,\n  hitpoints: 1,\n  maxHitpoints: 1,\n  id: '1',\n  name: '',\n  proficiency: 0,\n  concentrating: '',\n  classes: [JSON.parse(JSON.stringify(defaultClass))],\n  abilityScores: {\n    STR: 10,\n    INT: 10,\n    WIS: 10,\n    DEX: 10,\n    CON: 10,\n    CHR: 10\n  }\n};\nexport default new Vuex.Store({\n  state: {\n    hitDice: {\n      Barbarian: 12,\n      Bard: 8,\n      Cleric: 8,\n      Druid: 8,\n      Fighter: 10,\n      Monk: 8,\n      Paladin: 10,\n      Ranger: 10,\n      Rogue: 8,\n      Sorcerer: 6,\n      Warlock: 8,\n      Wizard: 6\n    },\n    tab: 0,\n    snackbar: {\n      show: false,\n      color: 'red darken-1',\n      message: '',\n      buttonMessage: '',\n      buttonFunction: undefined\n    },\n    spellsInfo: {\n      spellList: [],\n      className: '',\n      currSpellInfo: {}\n    },\n    classOpts: [],\n    magicClassOpts: [],\n    characters: [JSON.parse(JSON.stringify(defaultCharacter))]\n  },\n  mutations: {\n    // character mutations\n    addCharacter: function addCharacter() {\n      var newChar = JSON.parse(JSON.stringify(defaultCharacter));\n      newChar.id = Math.floor(Math.random() * Math.pow(10, 10) + 2).toString();\n      this.state.characters.push(newChar);\n    },\n    changeClass: function changeClass(state, payload) {\n      // charIndex classIndex newClass\n      this.state.characters[payload.charIndex].classes[payload.classIndex].classname = payload.newClass;\n      this.commit('updateSlots', {\n        charIndex: payload.charIndex,\n        classIndex: payload.classIndex\n      });\n    },\n    changeClassLevel: function changeClassLevel(state, payload) {\n      // charIndex classIndex newLevel\n      var levelOffset = payload.newLevel - this.state.characters[payload.charIndex].classes[payload.classIndex].level;\n\n      if (payload.classIndex === 0 && this.state.characters[payload.charIndex].classes[payload.classIndex].level === 0) {\n        this.commit('setMaxHP', {\n          charIndex: payload.charIndex,\n          hitpoints: this.state.characters[payload.charIndex].maxHitpoints += this.state.hitDice[this.state.characters[payload.charIndex].classes[payload.classIndex].classname] + (this.state.characters[payload.charIndex].abilityScores.CON - 10) / 2\n        });\n        levelOffset -= 1;\n      }\n\n      if (this.state.characters[payload.charIndex].rollHealth) {\n        // health was calculated by rolling. Roll again.\n        this.commit('setMaxHP', {\n          charIndex: payload.charIndex,\n          hitpoints: this.state.characters[payload.charIndex].maxHitpoints += (Math.random() * (this.state.hitDice[this.state.characters[payload.charIndex].classes[payload.classIndex].classname] - 1) + 1 + (this.state.characters[payload.charIndex].abilityScores.CON - 10) / 2) * levelOffset\n        });\n      } else {\n        // health took average. do that.\n        this.commit('setMaxHP', {\n          charIndex: payload.charIndex,\n          hitpoints: this.state.characters[payload.charIndex].maxHitpoints += (Math.ceil(this.state.hitDice[this.state.characters[payload.charIndex].classes[payload.classIndex].classname] / 2) + (this.state.characters[payload.charIndex].abilityScores.CON - 10) / 2) * levelOffset\n        });\n      }\n\n      this.state.characters[payload.charIndex].classes[payload.classIndex].level = payload.newLevel;\n      this.commit('updateSlots', {\n        charIndex: payload.charIndex,\n        classIndex: payload.classIndex\n      });\n      this.commit('proficiencyBonus', payload.charIndex);\n    },\n    changeName: function changeName(state, payload) {\n      // index name\n      this.state.characters[payload.index].name = payload.name;\n    },\n    decrementSlot: function decrementSlot(state, payload) {\n      // charIndex classIndex level\n      if (this.state.characters[payload.charIndex].classes[payload.classIndex].workingSlots[payload.level] > 0) {\n        this.state.characters[payload.charIndex].classes[payload.classIndex].workingSlots[payload.level]--;\n      }\n    },\n    incrementSlot: function incrementSlot(state, payload) {\n      // charIndex classIndex level\n      this.state.characters[payload.charIndex].classes[payload.classIndex].workingSlots[payload.level]++;\n    },\n    longRest: function longRest(state, charIndex) {\n      for (var c in this.state.characters[charIndex].classes) {\n        this.state.characters[charIndex].classes[c].workingSlots = JSON.parse(JSON.stringify(this.state.characters[charIndex].classes[c].slots));\n      }\n    },\n    multiclass: function multiclass(state, payload) {\n      // index, classname\n      if (this.state.characters[payload.index].classes.length > 10) {\n        return; // no more than 10 classes\n      }\n\n      for (var i in this.state.characters[payload.index].classes) {\n        var c = this.state.characters[payload.index].classes[i];\n\n        if (c.classname === payload.classname) {\n          return; // no duplicate classes\n        }\n      }\n\n      var newclass = JSON.parse(JSON.stringify(defaultClass));\n      newclass.classname = payload.classname;\n      this.state.characters[payload.index].classes.push(newclass);\n    },\n    offsetStat: function offsetStat(state, payload) {\n      // stat index offset\n      if (this.state.characters[payload.index].abilityScores[payload.stat] + payload.offset < 0) {\n        return;\n      }\n\n      if (payload.stat === 'CON') {\n        var totalLevel = 0;\n\n        for (var c in this.state.characters[payload.index].classes) {\n          totalLevel += this.state.characters[payload.index].classes[c].level;\n        }\n\n        if (totalLevel === 0) {\n          this.state.characters[payload.index].abilityScores[payload.stat] += payload.offset;\n          return;\n        }\n\n        var oddCorrection = this.state.characters[payload.index].abilityScores[payload.stat] % 2 / 2.0;\n        var newmax = this.state.characters[payload.index].maxHitpoints + Math.floor(payload.offset / 2 + oddCorrection) * totalLevel;\n        this.commit('setMaxHP', {\n          charIndex: payload.index,\n          hitpoints: newmax\n        });\n\n        if (this.state.characters[payload.index].maxHitpoints < this.state.characters[payload.index].hitpoints) {\n          this.commit('setHP', {\n            charIndex: payload.index,\n            hitpoints: newmax\n          });\n        }\n      }\n\n      this.state.characters[payload.index].abilityScores[payload.stat] += payload.offset;\n    },\n    proficiencyBonus: function proficiencyBonus(state, charIndex) {\n      var totalLevel = 0;\n\n      for (var c in this.state.characters[charIndex].classes) {\n        if (this.state.characters[charIndex].classes[c].hasOwnProperty('level')) {\n          totalLevel += this.state.characters[charIndex].classes[c].level;\n        }\n      }\n\n      this.state.characters[charIndex].proficiency = Math.floor(totalLevel / 5) + 2;\n    },\n    removeCharacter: function removeCharacter(state, identifier) {\n      var index = this.state.characters.findIndex(function (element) {\n        return element.id === identifier;\n      });\n\n      if (index === -1) {\n        return;\n      } else if (index === 0) {\n        this.commit('changeTab', 1);\n      } else {\n        this.commit('changeTab', 0);\n      }\n\n      this.state.characters.splice(index, 1);\n    },\n    setDeathThrows: function setDeathThrows(state, payload) {\n      // charIndex throwVal\n      this.state.characters[payload.charIndex].deathThrows = payload.throwVal;\n    },\n    setLifeThrows: function setLifeThrows(state, payload) {\n      // charIndex throwVal\n      this.state.characters[payload.charIndex].lifeThrows = payload.throwVal;\n    },\n    setHP: function setHP(state, payload) {\n      // charIndex hitpoints\n      if (payload.hitpoints > 0) {\n        this.commit('setLifeThrows', {\n          charIndex: payload.charIndex,\n          throwVal: 0\n        });\n        this.commit('setDeathThrows', {\n          charIndex: payload.charIndex,\n          throwVal: 0\n        });\n      }\n\n      if (payload.hitpoints > this.state.characters[payload.charIndex].maxHitpoints) {\n        this.state.characters[payload.charIndex].hitpoints = Math.floor(this.state.characters[payload.charIndex].maxHitpoints);\n        return;\n      }\n\n      this.state.characters[payload.charIndex].hitpoints = payload.hitpoints;\n    },\n    setMaxHP: function setMaxHP(state, payload) {\n      // charIndex hitpoints\n      if (payload.hitpoints >= 0) {\n        this.state.characters[payload.charIndex].maxHitpoints = Math.floor(payload.hitpoints);\n      }\n    },\n    setRollState: function setRollState(state, payload) {\n      this.state.characters[payload.charIndex].rollHealth = payload.rollHealth;\n    },\n    stopConcentrating: function stopConcentrating(state, index) {\n      this.state.characters[index].concentrating = '';\n    },\n    updateSlots: function updateSlots(state, payload) {\n      var _this = this;\n\n      // charIndex classIndex\n      var strBody = JSON.stringify({\n        classes: [{\n          class: this.state.characters[payload.charIndex].classes[payload.classIndex].classname,\n          level: this.state.characters[payload.charIndex].classes[payload.classIndex].level\n        }]\n      });\n      var r = new Request('http://localhost:8010/magic/slots/', {\n        method: 'POST',\n        body: strBody\n      });\n      fetch(r).then(function (response) {\n        if (response.status === 200) {\n          return response.json();\n        } else {\n          throw new Error('Something went wrong on api server!');\n        }\n      }).then(function (response) {\n        _this.state.characters[payload.charIndex].classes[payload.classIndex].slots = response.Slots; // make a deep copy for long rests without need to re-access backend\n\n        _this.state.characters[payload.charIndex].classes[payload.classIndex].workingSlots = JSON.parse(JSON.stringify(response.Slots));\n      }).catch(function (error) {\n        console.error(error);\n      });\n    },\n    // classopts mutations\n    updateClassOpts: function updateClassOpts() {\n      var _this2 = this;\n\n      var r = new Request('http://localhost:8010/classes/');\n      fetch(r).then(function (response) {\n        if (response.status === 200) {\n          return response.json();\n        } else {\n          throw new Error('Something went wrong on api server!');\n        }\n      }).then(function (response) {\n        _this2.state.classOpts = response.Classes;\n        _this2.state.magicClassOpts = response.MagicClasses;\n      }).catch(function (error) {\n        console.error(error);\n      });\n    },\n    // spell mutations\n    setSpellOpts: function setSpellOpts(state, payload) {\n      // className spellOpts\n      this.state.spellsInfo.currSpellInfo = {};\n      this.state.spellsInfo.spellList = payload.spellOpts;\n      this.state.spellsInfo.className = payload.className;\n    },\n    setSpellInfo: function setSpellInfo(state, spellInfo) {\n      this.state.spellsInfo.currSpellInfo = spellInfo;\n    },\n    // snackbar mutations\n    hideSnackbar: function hideSnackbar() {\n      this.state.snackbar.show = false;\n    },\n    showSnackbar: function showSnackbar(state, payload) {\n      // message, optional: func buttonMessage color\n      this.state.snackbar.message = payload.message;\n\n      if (payload.hasOwnProperty('func') && payload.hasOwnProperty('buttonMessage')) {\n        this.state.snackbar.buttonMessage = payload.buttonMessage;\n        this.state.snackbar.buttonFunction = payload.func;\n      }\n\n      if (payload.hasOwnProperty('color')) {\n        this.state.snackbar.color = payload.color;\n      }\n\n      this.state.snackbar.show = true;\n    },\n    // tab mutations\n    changeTab: function changeTab(state, index) {\n      this.state.tab = index;\n    }\n  }\n});",{"version":3,"sources":["/Users/daren.mcculley/go/src/github.com/rtfreedman/SpellTracker/frontend/src/store.js"],"names":["Vue","Vuex","use","defaultClass","classname","level","slots","workingSlots","defaultCharacter","deathThrows","lifeThrows","initiative","hitpoints","maxHitpoints","id","name","proficiency","concentrating","classes","JSON","parse","stringify","abilityScores","STR","INT","WIS","DEX","CON","CHR","Store","state","hitDice","Barbarian","Bard","Cleric","Druid","Fighter","Monk","Paladin","Ranger","Rogue","Sorcerer","Warlock","Wizard","tab","snackbar","show","color","message","buttonMessage","buttonFunction","undefined","spellsInfo","spellList","className","currSpellInfo","classOpts","magicClassOpts","characters","mutations","addCharacter","newChar","Math","floor","random","toString","push","changeClass","payload","charIndex","classIndex","newClass","commit","changeClassLevel","levelOffset","newLevel","rollHealth","ceil","changeName","index","decrementSlot","incrementSlot","longRest","c","multiclass","length","i","newclass","offsetStat","stat","offset","totalLevel","oddCorrection","newmax","proficiencyBonus","hasOwnProperty","removeCharacter","identifier","findIndex","element","splice","setDeathThrows","throwVal","setLifeThrows","setHP","setMaxHP","setRollState","stopConcentrating","updateSlots","strBody","class","r","Request","method","body","fetch","then","response","status","json","Error","Slots","catch","console","error","updateClassOpts","Classes","MagicClasses","setSpellOpts","spellOpts","setSpellInfo","spellInfo","hideSnackbar","showSnackbar","func","changeTab"],"mappings":"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","sourcesContent":["import Vue from 'vue'\nimport Vuex from 'vuex'\n\nVue.use(Vuex)\n\nconst defaultClass = {\n  classname: '',\n  level: 0,\n  slots: {\n    1: 0,\n    2: 0,\n    3: 0,\n    4: 0,\n    5: 0,\n    6: 0,\n    7: 0,\n    8: 0,\n    9: 0,\n  },\n  workingSlots: {\n    1: 0,\n    2: 0,\n    3: 0,\n    4: 0,\n    5: 0,\n    6: 0,\n    7: 0,\n    8: 0,\n    9: 0,\n  },\n}\n\nconst defaultCharacter = {\n  deathThrows: 0,\n  lifeThrows: 0,\n  initiative: null,\n  hitpoints: 1,\n  maxHitpoints: 1,\n  id: '1',\n  name: '',\n  proficiency: 0,\n  concentrating: '',\n  classes: [JSON.parse(JSON.stringify(defaultClass))],\n  abilityScores: {\n    STR: 10,\n    INT: 10,\n    WIS: 10,\n    DEX: 10,\n    CON: 10,\n    CHR: 10,\n  },\n}\n\nexport default new Vuex.Store({\n  state: {\n    hitDice: {\n      Barbarian: 12,\n      Bard: 8,\n      Cleric: 8,\n      Druid: 8,\n      Fighter: 10,\n      Monk: 8,\n      Paladin: 10,\n      Ranger: 10,\n      Rogue: 8,\n      Sorcerer: 6,\n      Warlock: 8,\n      Wizard: 6,\n    },\n    tab: 0,\n    snackbar: {\n      show: false,\n      color: 'red darken-1',\n      message: '',\n      buttonMessage: '',\n      buttonFunction: undefined,\n    },\n    spellsInfo: {\n      spellList: [],\n      className: '',\n      currSpellInfo: {},\n    },\n    classOpts: [],\n    magicClassOpts: [],\n    characters: [JSON.parse(JSON.stringify(defaultCharacter))],\n  },\n  mutations: {\n    // character mutations\n    addCharacter() {\n      let newChar = JSON.parse(JSON.stringify(defaultCharacter))\n      newChar.id = Math.floor(Math.random() * 10 ** 10 + 2).toString()\n      this.state.characters.push(newChar)\n    },\n    changeClass(state, payload) {\n      // charIndex classIndex newClass\n      this.state.characters[payload.charIndex].classes[\n        payload.classIndex\n      ].classname = payload.newClass\n      this.commit('updateSlots', {\n        charIndex: payload.charIndex,\n        classIndex: payload.classIndex,\n      })\n    },\n    changeClassLevel(state, payload) {\n      // charIndex classIndex newLevel\n      let levelOffset =\n        payload.newLevel -\n        this.state.characters[payload.charIndex].classes[payload.classIndex]\n          .level\n      if (\n        payload.classIndex === 0 &&\n        this.state.characters[payload.charIndex].classes[payload.classIndex]\n          .level === 0\n      ) {\n        this.commit('setMaxHP', {\n          charIndex: payload.charIndex,\n          hitpoints: (this.state.characters[payload.charIndex].maxHitpoints +=\n            this.state.hitDice[\n              this.state.characters[payload.charIndex].classes[\n                payload.classIndex\n              ].classname\n            ] +\n            (this.state.characters[payload.charIndex].abilityScores.CON - 10) /\n              2),\n        })\n        levelOffset -= 1\n      }\n      if (this.state.characters[payload.charIndex].rollHealth) {\n        // health was calculated by rolling. Roll again.\n        this.commit('setMaxHP', {\n          charIndex: payload.charIndex,\n          hitpoints: (this.state.characters[payload.charIndex].maxHitpoints +=\n            (Math.random() *\n              (this.state.hitDice[\n                this.state.characters[payload.charIndex].classes[\n                  payload.classIndex\n                ].classname\n              ] -\n                1) +\n              1 +\n              (this.state.characters[payload.charIndex].abilityScores.CON -\n                10) /\n                2) *\n            levelOffset),\n        })\n      } else {\n        // health took average. do that.\n        this.commit('setMaxHP', {\n          charIndex: payload.charIndex,\n          hitpoints: (this.state.characters[payload.charIndex].maxHitpoints +=\n            (Math.ceil(\n              this.state.hitDice[\n                this.state.characters[payload.charIndex].classes[\n                  payload.classIndex\n                ].classname\n              ] / 2,\n            ) +\n              (this.state.characters[payload.charIndex].abilityScores.CON -\n                10) /\n                2) *\n            levelOffset),\n        })\n      }\n      this.state.characters[payload.charIndex].classes[\n        payload.classIndex\n      ].level = payload.newLevel\n      this.commit('updateSlots', {\n        charIndex: payload.charIndex,\n        classIndex: payload.classIndex,\n      })\n      this.commit('proficiencyBonus', payload.charIndex)\n    },\n    changeName(state, payload) {\n      // index name\n      this.state.characters[payload.index].name = payload.name\n    },\n    decrementSlot(state, payload) {\n      // charIndex classIndex level\n      if (\n        this.state.characters[payload.charIndex].classes[payload.classIndex]\n          .workingSlots[payload.level] > 0\n      ) {\n        this.state.characters[payload.charIndex].classes[payload.classIndex]\n          .workingSlots[payload.level]--\n      }\n    },\n    incrementSlot(state, payload) {\n      // charIndex classIndex level\n      this.state.characters[payload.charIndex].classes[payload.classIndex]\n        .workingSlots[payload.level]++\n    },\n    longRest(state, charIndex) {\n      for (let c in this.state.characters[charIndex].classes) {\n        this.state.characters[charIndex].classes[c].workingSlots = JSON.parse(\n          JSON.stringify(this.state.characters[charIndex].classes[c].slots),\n        )\n      }\n    },\n    multiclass(state, payload) {\n      // index, classname\n      if (this.state.characters[payload.index].classes.length > 10) {\n        return // no more than 10 classes\n      }\n      for (let i in this.state.characters[payload.index].classes) {\n        let c = this.state.characters[payload.index].classes[i]\n        if (c.classname === payload.classname) {\n          return // no duplicate classes\n        }\n      }\n      let newclass = JSON.parse(JSON.stringify(defaultClass))\n      newclass.classname = payload.classname\n      this.state.characters[payload.index].classes.push(newclass)\n    },\n    offsetStat(state, payload) {\n      // stat index offset\n      if (\n        this.state.characters[payload.index].abilityScores[payload.stat] +\n          payload.offset <\n        0\n      ) {\n        return\n      }\n      if (payload.stat === 'CON') {\n        let totalLevel = 0\n        for (let c in this.state.characters[payload.index].classes) {\n          totalLevel += this.state.characters[payload.index].classes[c].level\n        }\n        if (totalLevel === 0) {\n          this.state.characters[payload.index].abilityScores[payload.stat] +=\n            payload.offset\n          return\n        }\n        let oddCorrection =\n          (this.state.characters[payload.index].abilityScores[payload.stat] %\n            2) /\n          2.0\n        let newmax =\n          this.state.characters[payload.index].maxHitpoints +\n          Math.floor(payload.offset / 2 + oddCorrection) * totalLevel\n        this.commit('setMaxHP', {\n          charIndex: payload.index,\n          hitpoints: newmax,\n        })\n        if (\n          this.state.characters[payload.index].maxHitpoints <\n          this.state.characters[payload.index].hitpoints\n        ) {\n          this.commit('setHP', {\n            charIndex: payload.index,\n            hitpoints: newmax,\n          })\n        }\n      }\n      this.state.characters[payload.index].abilityScores[payload.stat] +=\n        payload.offset\n    },\n    proficiencyBonus(state, charIndex) {\n      let totalLevel = 0\n      for (let c in this.state.characters[charIndex].classes) {\n        if (\n          this.state.characters[charIndex].classes[c].hasOwnProperty('level')\n        ) {\n          totalLevel += this.state.characters[charIndex].classes[c].level\n        }\n      }\n      this.state.characters[charIndex].proficiency =\n        Math.floor(totalLevel / 5) + 2\n    },\n    removeCharacter(state, identifier) {\n      let index = this.state.characters.findIndex(function(element) {\n        return element.id === identifier\n      })\n      if (index === -1) {\n        return\n      } else if (index === 0) {\n        this.commit('changeTab', 1)\n      } else {\n        this.commit('changeTab', 0)\n      }\n      this.state.characters.splice(index, 1)\n    },\n    setDeathThrows(state, payload) {\n      // charIndex throwVal\n      this.state.characters[payload.charIndex].deathThrows = payload.throwVal\n    },\n    setLifeThrows(state, payload) {\n      // charIndex throwVal\n      this.state.characters[payload.charIndex].lifeThrows = payload.throwVal\n    },\n    setHP(state, payload) {\n      // charIndex hitpoints\n      if (payload.hitpoints > 0) {\n        this.commit('setLifeThrows', {\n          charIndex: payload.charIndex,\n          throwVal: 0,\n        })\n        this.commit('setDeathThrows', {\n          charIndex: payload.charIndex,\n          throwVal: 0,\n        })\n      }\n      if (\n        payload.hitpoints >\n        this.state.characters[payload.charIndex].maxHitpoints\n      ) {\n        this.state.characters[payload.charIndex].hitpoints = Math.floor(\n          this.state.characters[payload.charIndex].maxHitpoints,\n        )\n        return\n      }\n      this.state.characters[payload.charIndex].hitpoints = payload.hitpoints\n    },\n    setMaxHP(state, payload) {\n      // charIndex hitpoints\n      if (payload.hitpoints >= 0) {\n        this.state.characters[payload.charIndex].maxHitpoints = Math.floor(\n          payload.hitpoints,\n        )\n      }\n    },\n    setRollState(state, payload) {\n      this.state.characters[payload.charIndex].rollHealth = payload.rollHealth\n    },\n    stopConcentrating(state, index) {\n      this.state.characters[index].concentrating = ''\n    },\n    updateSlots(state, payload) {\n      // charIndex classIndex\n      let strBody = JSON.stringify({\n        classes: [\n          {\n            class: this.state.characters[payload.charIndex].classes[\n              payload.classIndex\n            ].classname,\n            level: this.state.characters[payload.charIndex].classes[\n              payload.classIndex\n            ].level,\n          },\n        ],\n      })\n      let r = new Request('http://localhost:8010/magic/slots/', {\n        method: 'POST',\n        body: strBody,\n      })\n      fetch(r)\n        .then(response => {\n          if (response.status === 200) {\n            return response.json()\n          } else {\n            throw new Error('Something went wrong on api server!')\n          }\n        })\n        .then(response => {\n          this.state.characters[payload.charIndex].classes[\n            payload.classIndex\n          ].slots = response.Slots\n          // make a deep copy for long rests without need to re-access backend\n          this.state.characters[payload.charIndex].classes[\n            payload.classIndex\n          ].workingSlots = JSON.parse(JSON.stringify(response.Slots))\n        })\n        .catch(error => {\n          console.error(error)\n        })\n    },\n    // classopts mutations\n    updateClassOpts() {\n      let r = new Request('http://localhost:8010/classes/')\n      fetch(r)\n        .then(response => {\n          if (response.status === 200) {\n            return response.json()\n          } else {\n            throw new Error('Something went wrong on api server!')\n          }\n        })\n        .then(response => {\n          this.state.classOpts = response.Classes\n          this.state.magicClassOpts = response.MagicClasses\n        })\n        .catch(error => {\n          console.error(error)\n        })\n    },\n    // spell mutations\n    setSpellOpts(state, payload) {\n      // className spellOpts\n      this.state.spellsInfo.currSpellInfo = {}\n      this.state.spellsInfo.spellList = payload.spellOpts\n      this.state.spellsInfo.className = payload.className\n    },\n    setSpellInfo(state, spellInfo) {\n      this.state.spellsInfo.currSpellInfo = spellInfo\n    },\n    // snackbar mutations\n    hideSnackbar() {\n      this.state.snackbar.show = false\n    },\n    showSnackbar(state, payload) {\n      // message, optional: func buttonMessage color\n      this.state.snackbar.message = payload.message\n      if (\n        payload.hasOwnProperty('func') &&\n        payload.hasOwnProperty('buttonMessage')\n      ) {\n        this.state.snackbar.buttonMessage = payload.buttonMessage\n        this.state.snackbar.buttonFunction = payload.func\n      }\n      if (payload.hasOwnProperty('color')) {\n        this.state.snackbar.color = payload.color\n      }\n      this.state.snackbar.show = true\n    },\n    // tab mutations\n    changeTab(state, index) {\n      this.state.tab = index\n    },\n  },\n})\n"]}]}